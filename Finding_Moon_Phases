#Moon Phases
"""
Author: Anthony Molina
Date Created:December 30, 2025
Date Finished:
Description: This program calculates the phase of the moon based on user input of the day, month, and year.
    
"""
import requests
from datetime import datetime, timezone

def get_moon_phase(day, month, year):
    try:
        month_num = allowed_months[month.name.strip().lower()]
    except KeyError:
        return "Invalid month input."
    
    try:
        
        url = f"https://api.farmsense.net/v1/moonphases/?d={year}-{month:02d}-{day:02d}"
        response = requests.get(url)
        data = response.json()
        phase_name = data[0] ['PhaseName']
        illumination = data[0]['Illumination']
        return f"On {month}/{day}/{year}, the moon phase is {phase_name} with {illumination}% illumination."
    except requests.RequestException as e:
        return f"Error fetching moon phase data: {e}"
    except (KeyError, IndexError, ValueError):
        return f"Error processing moon phase data."
if __name__ == "__main__":
    try:
        day = int(input("Enter the day (1-31): "))
        month= str(input("Enter the month (January-December): "))
        year= int(input("Enter a year (e.g. 2025): "))
        
        allowed_months = {"January":1, "February":2, "March":3, "April":4, "May":5, "June":6,
                        "July":7, "August":8, "September":9, "October":10, "November":11, "December":12}
        

        if not (1 <= day <=31):
            raise ValueError("Invalid date input.")
        
        if month  not in allowed_months:
            raise ValueError("Invalid month input.")
    
        result = get_moon_phase(day, month, year)
        print(result)
    
    except ValueError:
        print("Invalid Input. Please enter numeric date values.")
